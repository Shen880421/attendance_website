# ğŸ“˜ åœ˜é«”å°ˆæ¡ˆ â€“ å‡ºç¼ºå‹¤ç³»çµ±

## ğŸ§­ ç³»çµ±æµç¨‹åœ–

```mermaid
flowchart TD
    A[ä½¿ç”¨è€…é–‹å•Ÿç¶²ç«™] --> B[ç™»å…¥é é¢]
    B --> C{èº«åˆ†åˆ¥}
    C --> D1[ä¸€èˆ¬å­¸å“¡]
    C --> D2[ç®¡ç†è€…/ä¼æ¥­ç«¯]
    C --> D3[ç³»çµ±ç®¡ç†å“¡]

    D1 --> E1[æª¢è¦–å€‹äººå„€è¡¨æ¿]
    D2 --> F2[é¸æ“‡å­¸å“¡ â†’ é¡¯ç¤ºå…¶å„€è¡¨æ¿]
    D3 --> G3[é€²å…¥å¾Œå° â†’ æ–°å¢/ç·¨è¼¯ä½¿ç”¨è€…èˆ‡æ‰“å¡è³‡æ–™]
```

## ğŸ—ï¸ ç³»çµ±æ¶æ§‹åœ–

```mermaid
flowchart TD
    A[ä½¿ç”¨è€…ç€è¦½å™¨] --> B[å‰ç«¯ç³»çµ±]
    B --> C[PHP æ§åˆ¶å™¨]
    C --> D[(MySQL è³‡æ–™åº«)]
```

## ğŸš€ å¿«é€Ÿé–‹å§‹

### 1. å…‹éš†å°ˆæ¡ˆ

```bash
git clone [å°ˆæ¡ˆç¶²å€]
cd attendance_website
```

### 2. å®‰è£ PHP ä¾è³´

```bash
composer install
```

### 3. Docker ç’°å¢ƒå»ºç«‹

#### 3.1 dockerå»ºç«‹è³‡æ–™åº«

åŒæ™‚è¨­å®šå¯†ç¢¼

```bash
docker run -itd --name mysql -p 3306:3306 -e MYSQL_ROOT_PASSWORD=ashen2250 mysql
```

```bash
docker run --name phpmyadmin -d --link mysql -e PMA_HOST="mysql" -p 8080:80 phpmyadmin/phpmyadmin 
```

#### 3.3 dockerå»ºç«‹ php/apache

```bash
docker build -t myattendance-phpapache . 
#å°‡å°ˆæ¡ˆè³‡æ–™å¤¾æ‰“åŒ…æˆæ˜ åƒæª”
```

å•Ÿç”¨å®¹å™¨ä¸¦å°‡è³‡æ–™å¤¾æ˜ å°„åˆ°å®¹å™¨

```bash
# Mac ç”¨æˆ¶è«‹ä½¿ç”¨ä»¥ä¸‹è·¯å¾‘
docker run -d --name running-attendence -p 80:80 -v /Users/ä½ çš„ç”¨æˆ¶å/å°ˆæ¡ˆè³‡æ–™å¤¾:/var/www/html/ myattendance-phpapache:latest

# Windows ç”¨æˆ¶è«‹ä½¿ç”¨ä»¥ä¸‹è·¯å¾‘
docker run -d --name running-attendence -p 80:80 -v /è±¬æ¡ˆè³‡æ–™å¤¾:/var/www/html/ myattendance-phpapache:latest
```

### 4. åˆå§‹åŒ–è³‡æ–™åº«

- é–‹å•Ÿ phpMyAdminï¼š<http://localhost:8080>
- åŒ¯å…¥ `database/` è³‡æ–™å¤¾ä¸­çš„ SQL æª”æ¡ˆ

### 5. è¨­å®šè³‡æ–™åº«é€£ç·š

æ›´æ–° `inc/db.inc.php` ä¸­çš„é€£ç·šè³‡è¨Š

### 6. å•Ÿå‹•æœå‹™

```bash
# æ–¹æ³•1ï¼šä½¿ç”¨ Docker
http://localhost

# æ–¹æ³•2ï¼šä½¿ç”¨ PHP å…§å»ºä¼ºæœå™¨
cd public && php -S localhost:8000
```

## ğŸ“ å°ˆæ¡ˆçµæ§‹

```bash
attendance_website/
â”œâ”€â”€ ğŸ“ database/          # è³‡æ–™åº«ç›¸é—œæª”æ¡ˆ
â”‚   â”œâ”€â”€ *.sql            # è³‡æ–™è¡¨çµæ§‹æª”
â”‚   â””â”€â”€ ç”¨dockerå»ºç«‹ç’°å¢ƒèªæ³•.txt
â”œâ”€â”€ ğŸ“ inc/              # æ ¸å¿ƒåŠŸèƒ½æª”æ¡ˆ
â”‚   â”œâ”€â”€ db.inc.php       # è³‡æ–™åº«é€£ç·šè¨­å®š
â”‚   â””â”€â”€ twig.inc.php     # Twig æ¨¡æ¿å¼•æ“è¨­å®š
â”œâ”€â”€ ğŸ“ public/           # å…¬é–‹å­˜å–æª”æ¡ˆ
â”‚   â”œâ”€â”€ login.php        # ç™»å…¥é é¢
â”‚   â”œâ”€â”€ *_dashboard.php  # å„è§’è‰²å„€è¡¨æ¿
â”‚   â””â”€â”€ *.json          # AJAX è³‡æ–™æª”
â”œâ”€â”€ ğŸ“ templates/        # Twig æ¨¡æ¿æª”æ¡ˆ
â”œâ”€â”€ ğŸ“ vendor/           # Composer å¥—ä»¶
â”œâ”€â”€ composer.json        # PHP å¥—ä»¶ç®¡ç†
â”œâ”€â”€ Dockerfile          # Docker æ˜ åƒæª”è¨­å®š
â””â”€â”€ README.md           # å°ˆæ¡ˆèªªæ˜æ–‡ä»¶
```

## ğŸ“¦ è³‡æ–™è¡¨çµæ§‹

### è¡¨1. èª²ç¨‹è³‡æ–™ â€“ `classes`

| æ¬„ä½åç¨±     | è³‡æ–™å‹åˆ¥ | èªªæ˜     |
|--------------|----------|----------|
| id           | INT      | ä¸»éµ     |
| group_name   | VARCHAR  | ç­ç´š     |
| class_date   | DATE     | ä¸Šèª²æ—¥æœŸ  |
| class_hours  | INT      | èª²ç¨‹æ™‚æ•¸  |
| class_name   | VARCHAR  | èª²ç¨‹åç¨±  |

### è¡¨2. æ‰“å¡è¨˜éŒ„åŸå§‹æª” â€“ `total_hours`

| æ¬„ä½åç¨±   | è³‡æ–™å‹åˆ¥ | èªªæ˜           |
|------------|----------|----------------|
| group_name | VARCHAR  | ç­ç´š            |
| Name       | VARCHAR  | å­¸å“¡å§“å         |
| In/Out     | VARCHAR  | æ‰“å¡ç‹€æ…‹(in/out) |
| Time       | VARCHAR  | æ‰“å¡æ™‚é–“         |
| Date       | VARCHAR  | æ‰“å¡æ—¥æœŸ         |
|IPAddress   | VARCHAR  | æ‰“å¡IP          |

### è¡¨3. ä½¿ç”¨è€… - `admin_users`

| æ¬„ä½åç¨±     | è³‡æ–™å‹åˆ¥ | èªªæ˜     |
|--------------|----------|----------|
| no           | INT      | ä¸»éµ     |
| acc   | VARCHAR         | å¸³è™Ÿ     |
| pwd   | VARCHAR         | å¯†ç¢¼  |
| role  | enum('admin', 'adv-user', 'normal-user')| ç”¨ä¾†é™åˆ¶ä½¿ç”¨è€…æ¬Šé™  |

### è¡¨4. å‡ºç¼ºå¸­ç´€éŒ„åŸå§‹æª” â€“ `attendance_log`

| æ¬„ä½åç¨±        | è³‡æ–™å‹åˆ¥ | èªªæ˜           |
|------------     |---------|----------------|
| id              | INT     | ä¸»éµ           |
| name            | VARCHAR | å­¸å“¡å§“å        |
| class_date      | date    | ä¸Šèª²æ—¥æœŸ        |
| class_hours     | float   | èª²ç¨‹æ™‚æ•¸        |
| raw_hours       | float   | åœ¨æ ¡æ™‚é–“        |
| attended_hours  | float   | ä¸Šèª²æ™‚æ•¸        |
| late_hours      | float   | é²åˆ°æ™‚æ•¸        |
| leave_early_hours| float  | æ—©é€€æ™‚æ•¸        |
| absent_hours    | float   | æœªåˆ°æ™‚æ•¸        |

## ğŸ‘¤ é è¨­å¸³è™Ÿ

| è§’è‰² | å¸³è™Ÿ | å¯†ç¢¼ | èªªæ˜ |
|------|------|------|------|
| ç³»çµ±ç®¡ç†å“¡ | <admin@test.com> | password | å®Œæ•´å¾Œå°æ¬Šé™ |
| ä¼æ¥­ç®¡ç†è€… | <adv-user@test.com> | password | æŸ¥çœ‹æ‰€æœ‰å­¸å“¡è³‡æ–™ |
| ä¸€èˆ¬å­¸å“¡ | <user@test.com> | password | åƒ…æŸ¥çœ‹å€‹äººè³‡æ–™ |

> âš ï¸ æ³¨æ„ï¼šæ­£å¼ç’°å¢ƒè«‹å‹™å¿…ä¿®æ”¹é è¨­å¯†ç¢¼ï¼

## ğŸ› ï¸ æŠ€è¡“å †ç–Š

- **å¾Œç«¯**ï¼šPHP 8.x
- **å‰ç«¯**ï¼šBootstrap 5, Chart.js, jQuery
- **æ¨¡æ¿å¼•æ“**ï¼šTwig
- **è³‡æ–™åº«**ï¼šMySQL 8.x
- **å®¹å™¨åŒ–**ï¼šDocker
- **å¥—ä»¶ç®¡ç†**ï¼šComposer

## ğŸš¨ å¸¸è¦‹å•é¡Œèˆ‡è§£æ±ºæ–¹æ¡ˆ

### â— ç’°å¢ƒå•é¡Œæ’æŸ¥

#### 1. Docker å®¹å™¨ç‹€æ…‹æª¢æŸ¥

```bash
# æª¢æŸ¥æ‰€æœ‰å®¹å™¨ç‹€æ…‹
docker ps -a

# æª¢æŸ¥å®¹å™¨æ—¥èªŒ
docker logs mysql
docker logs phpmyadmin
docker logs running-attendence
```

#### 2. è³‡æ–™åº«é€£ç·šå•é¡Œ

- **å•é¡Œ**ï¼šç„¡æ³•é€£æ¥åˆ° MySQL è³‡æ–™åº«
- **è§£æ±º**ï¼š
  1. ç¢ºèª Docker å®¹å™¨ IPï¼š`docker inspect mysql | grep IPAddress`
  2. æ›´æ–° `inc/db.inc.php` ä¸­çš„ä¸»æ©Ÿä½å€
  3. æª¢æŸ¥é˜²ç«ç‰†è¨­å®š

#### 3. Apache å®¹å™¨ 80 Port æ‰¾ä¸åˆ°æª”æ¡ˆ

- **å•é¡Œ**ï¼šè¨ªå• <http://localhost> é¡¯ç¤º "Not Found"
- **è§£æ±º**ï¼š
  1. æª¢æŸ¥æª”æ¡ˆæ›è¼‰è·¯å¾‘æ˜¯å¦æ­£ç¢ºï¼ˆMac ç”¨æˆ¶æ³¨æ„è·¯å¾‘æ ¼å¼ï¼‰
  2. ç¢ºèª Dockerfile è¨­å®šæ­£ç¢º
  3. é‡æ–°å»ºç½®æ˜ åƒæª”ï¼š`docker build -t myattendance-phpapache .`

#### 4. Twig æ¨¡æ¿éŒ¯èª¤

- **å•é¡Œ**ï¼š`Class "Twig\Cache\NullCache" not found`
- **è§£æ±º**ï¼š

  ```bash
  composer install
  composer update twig/twig
  ```

#### 5. PHP ç’°å¢ƒæª¢æŸ¥

```bash
# æª¢æŸ¥ PHP ç‰ˆæœ¬
php -v

# æª¢æŸ¥å¿…è¦æ“´å±•
php -m | grep pdo
php -m | grep mysql
```

### ğŸ”§ é–‹ç™¼ç’°å¢ƒè¨­å®š

#### VS Code å»ºè­°æ“´å±•

- Twig Language 2
- Live Server
- Docker
- GitLens

#### æœ¬åœ°æ¸¬è©¦ä¼ºæœå™¨

```bash
# ä½¿ç”¨ PHP å…§å»ºä¼ºæœå™¨
php -S localhost:8000

# Twig æ¨¡æ¿æ¸¬è©¦
# è¨ªå• http://localhost:8000/twig_test.php
```

## ğŸ› å·²çŸ¥å•é¡Œèˆ‡æ”¹é€²è¨ˆç•«

### ğŸš§ é–‹ç™¼ä¸­åŠŸèƒ½

- [ ] å¯†ç¢¼åŠ å¯†ï¼ˆç›®å‰ç‚ºæ˜æ–‡å„²å­˜ï¼‰
- [ ] è³‡æ–™åŒ¯å‡ºåŠŸèƒ½ï¼ˆCSVã€PDFï¼‰
- [ ] å³æ™‚é€šçŸ¥ç³»çµ±
- [ ] æ‰‹æ©Ÿç‰ˆ RWD å„ªåŒ–

### ğŸ”’ å®‰å…¨æ”¹é€²

- [ ] SQL æ³¨å…¥é˜²è­·åŠ å¼·
- [ ] XSS é˜²è­·
- [ ] CSRF Token
- [ ] å¯†ç¢¼å¼·åº¦æª¢é©—

### âš¡ æ•ˆèƒ½å„ªåŒ–

- [ ] è³‡æ–™åº«æŸ¥è©¢å„ªåŒ–
- [ ] åœ–è¡¨è¼‰å…¥å„ªåŒ–
- [ ] å¿«å–æ©Ÿåˆ¶å¯¦ä½œ

### ğŸ‘¥ å·¥ä½œåˆ†å·¥

| å§“å |  è² è²¬é …ç›®                 | ç‹€æ…‹            |
|------|-----------------------------------------|------------------------------|
| Shen | å„€éŒ¶æ¿é é¢ã€æ‰“å¡ç´€éŒ„é é¢ã€Docker Imageã€ HackMD æµç¨‹ï¼æ¶æ§‹åœ–ã€è³‡æ–™åº«è¨­è¨ˆæ•´ç†| â˜ æœªé–‹å§‹ â˜‘ï¸ é€²è¡Œä¸­ â˜ å®Œæˆ    |
| Cody |  æ–°å¢ä½¿ç”¨è€…é é¢ã€AJAX ä¸²æ¥  HackMD æŠ€è¡“çµ±æ•´ã€ç‰ˆæœ¬æ­·ç¨‹ã€å•é¡Œæå‡ºåŠæ’è§£      | â˜ æœªé–‹å§‹ â˜‘ï¸ é€²è¡Œä¸­ â˜ å®Œæˆ    |
| KevinLiu | ä¸€èˆ¬æ¬Šé™é é¢å»ºæ§‹ã€ä¼æ¥­ç«¯ä½¿ç”¨è€…é é¢å»ºæ§‹ã€AJAX ä¸²æ¥ | â˜ æœªé–‹å§‹ â˜‘ï¸ é€²è¡Œä¸­ â˜ å®Œæˆ |

## ğŸ”— ç›¸é—œé€£çµ

- [Twig å®˜æ–¹æ–‡ä»¶](https://twig.symfony.com/doc/)
- [Chart.js æ–‡ä»¶](https://www.chartjs.org/docs/)
- [Bootstrap 5 æ–‡ä»¶](https://getbootstrap.com/docs/5.0/)
- [Docker å®˜æ–¹æ–‡ä»¶](https://docs.docker.com/)

## ğŸ“ ç‰ˆæœ¬æ­·ç¨‹

- v1.0.0 (2025-01-XX) - åˆç‰ˆç™¼å¸ƒ
  - åŸºæœ¬ç™»å…¥åŠŸèƒ½
  - å„€è¡¨æ¿é¡¯ç¤º
  - Docker ç’°å¢ƒå»ºç½®
  - Twig æ¨¡æ¿ç³»çµ±

### ğŸ› ï¸æŠ€è¡“å †ç–Š

- **å¾Œç«¯**ï¼šPHP 8.x
- **å‰ç«¯**ï¼šBootstrap 5, Chart.js, jQuery
- **æ¨¡æ¿å¼•æ“**ï¼šTwig
- **è³‡æ–™åº«**ï¼šMySQL 8.x
- **å®¹å™¨åŒ–**ï¼šDocker
- **å¥—ä»¶ç®¡ç†**ï¼šComposer
